{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass CanvasState {\n  // масив дій які відмінили\n\n  constructor() {\n    this.canvas = null;\n    this.undoList = [];\n    // масив всіх дій\n    this.redoList = [];\n    makeAutoObservable(this);\n  }\n\n  //this function has name action cuz this function change state\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUndo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {\n    this.redoList.push(data);\n  }\n  undo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      let dataUrl = this.undoList.pop();\n      let img = new Image();\n      img.src = dataUrl;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","undoList","redoList","setCanvas","pushToUndo","data","push","pushToRedo","undo","ctx","getContext","length","dataUrl","pop","img","Image","src","onload","clearRect","width","height","drawImage"],"sources":["/Users/romanmac/WebstormProjects/paint/src/store/canvasState.js"],"sourcesContent":["import {makeAutoObservable} from \"mobx\";\n\nclass CanvasState {\n    canvas = null;\n    undoList = []; // масив всіх дій\n    redoList = []; // масив дій які відмінили\n\n    constructor() {\n        makeAutoObservable(this);\n    }\n\n    //this function has name action cuz this function change state\n    setCanvas(canvas) {\n        this.canvas = canvas;\n    }\n\n    pushToUndo(data) {\n        this.undoList.push(data);\n    }\n\n    pushToRedo(data) {\n        this.redoList.push(data);\n    }\n\n    undo() {\n        let ctx = this.canvas.getContext('2d');\n        if(this.undoList.length > 0){\n            let dataUrl = this.undoList.pop();\n            let img = new Image();\n            img.src = dataUrl;\n            img.onload = () => {\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n                ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n            }\n        }\n        else {\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n    }\n}\n\nexport default new CanvasState();"],"mappings":"AAAA,SAAQA,kBAAkB,QAAO,MAAM;AAEvC,MAAMC,WAAW,CAAC;EAGC;;EAEfC,WAAWA,CAAA,EAAG;IAAA,KAJdC,MAAM,GAAG,IAAI;IAAA,KACbC,QAAQ,GAAG,EAAE;IAAE;IAAA,KACfC,QAAQ,GAAG,EAAE;IAGTL,kBAAkB,CAAC,IAAI,CAAC;EAC5B;;EAEA;EACAM,SAASA,CAACH,MAAM,EAAE;IACd,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;EAEAI,UAAUA,CAACC,IAAI,EAAE;IACb,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACD,IAAI,CAAC;EAC5B;EAEAE,UAAUA,CAACF,IAAI,EAAE;IACb,IAAI,CAACH,QAAQ,CAACI,IAAI,CAACD,IAAI,CAAC;EAC5B;EAEAG,IAAIA,CAAA,EAAG;IACH,IAAIC,GAAG,GAAG,IAAI,CAACT,MAAM,CAACU,UAAU,CAAC,IAAI,CAAC;IACtC,IAAG,IAAI,CAACT,QAAQ,CAACU,MAAM,GAAG,CAAC,EAAC;MACxB,IAAIC,OAAO,GAAG,IAAI,CAACX,QAAQ,CAACY,GAAG,CAAC,CAAC;MACjC,IAAIC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACrBD,GAAG,CAACE,GAAG,GAAGJ,OAAO;MACjBE,GAAG,CAACG,MAAM,GAAG,MAAM;QACfR,GAAG,CAACS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAClB,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;QAC1DX,GAAG,CAACY,SAAS,CAACP,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAACd,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;MACnE,CAAC;IACL,CAAC,MACI;MACDX,GAAG,CAACS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAClB,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;IAC9D;EACJ;AACJ;AAEA,eAAe,IAAItB,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}